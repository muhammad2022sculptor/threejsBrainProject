import*as o from"https://cdn.skypack.dev/three@0.136";import{GLTFLoader as w}from"https://cdn.skypack.dev/three@0.136/examples/jsm/loaders/GLTFLoader.js";import{RGBELoader as b}from"https://cdn.skypack.dev/three@0.136/examples/jsm/loaders/RGBELoader";import y from"https://cdn.skypack.dev/gsap";const M=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))u(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const f of a.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&u(f)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function u(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}};M();anime({targets:"h1",translateY:["250%","0%"],delay:function(e,t){return t*180+1500},easing:"easeInOutExpo"});const d=new o.Vector2,l=new o.Scene,p=new o.PerspectiveCamera(55,window.innerWidth/window.innerHeight,.1,1e3),h=new o.Raycaster,i=new o.WebGLRenderer({antialias:!0,alpha:!0});i.autoClear=!1;i.setClearColor(0,0);i.setSize(window.innerWidth,window.innerHeight);document.body.appendChild(i.domElement);i.setPixelRatio(window.devicePixelRatio);i.outputEncoding=o.sRGBEncoding;i.toneMapping=o.ReinhardToneMapping;i.toneMappingExposure=1.6;new o.PMREMGenerator(i);new b().load("Studio1.hdr",function(e){e.mapping=o.EquirectangularReflectionMapping,l.environment=e});const x=new o.AmbientLight(4210752,1.8);l.add(x);const L=new o.DirectionalLight("white",9);l.add(L);let s,c,m;const E=new w;E.load("brain.glb",e=>{s=e.scene,s.position.x=2.4,s.position.y=-.8,c=s.getObjectByName("Mesh_0",!0),c.material=new o.MeshPhongMaterial({vertexColors:!0}),m=[];for(let t=0;t<c.geometry.attributes.position.count;t++)m.push(1,1,1);c.geometry.setAttribute("color",new o.BufferAttribute(new Float32Array(m),3)),l.add(s),anime({targets:s.scale,x:[0,1],y:[0,1],z:[0,1],delay:500,easing:"easeInOutCubic"})});function v(e){d.x=e.clientX/window.innerWidth*2-1,d.y=-(e.clientY/window.innerHeight)*2+1,s!=null&&(s.rotation.y=Math.PI*d.x/7,s.rotation.x=-Math.PI*d.y/12)}window.addEventListener("pointermove",v);p.position.z=5;function g(){if(requestAnimationFrame(g),h.setFromCamera(d,p),c!=null){const e=h.intersectObject(c);if(e.length>0){const{color:t}=e[0].object.geometry.attributes;t.setX(e[0].face.a,Math.random()*.1),t.setY(e[0].face.b,Math.random()*.1),t.setZ(e[0].face.c,Math.random()*.1),t.setX(e[0].face.a,Math.random()*.1),t.setY(e[0].face.b,Math.random()*.1),t.setZ(e[0].face.c,Math.random()*.1),t.setX(e[0].face.a,Math.random()*.1),t.setY(e[0].face.b,Math.random()*.1),t.setZ(e[0].face.c,Math.random()*.1),t.needsUpdate=!0;const r={r:Math.floor(Math.random()*1.5),g:Math.floor(Math.random()*1.5),b:Math.floor(Math.random()*1.5)};y.to(r,{r:1,g:1,b:1,duration:1,onUpdate:()=>{t.setX(e[0].face.a,r.r),t.setY(e[0].face.b,r.g),t.setZ(e[0].face.c,r.b),t.setX(e[0].face.a,r.r),t.setY(e[0].face.b,r.g),t.setZ(e[0].face.c,r.b),t.setX(e[0].face.a,r.r),t.setY(e[0].face.b,r.g),t.setZ(e[0].face.c,r.b),t.needsUpdate=!0}})}}i.render(l,p)}g();
